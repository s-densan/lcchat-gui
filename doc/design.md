# 設計

## メモ
- lcchat
- MQTTでアプリケーション間通信

## 要件
- ソフトウェア要件
    - クラウドやサーバを使わないチャット機能を提供する。
    - データはファイルで保持し、外部のソフトウェアを必要としない。
- ユーザ管理
    - ユーザ管理を行い、ユーザ単位で過去メッセージをトレースできる。
    - 使用端末により自動でログインできる仕組み（SSO）を実現し、ログインの手間を省く。
- ルーム管理
    - ユーザグループ単位でルームを作成できる。ルームに所属した単位に限定してチャットができる。
    - ルームに所属するためのパスワードを設定できる。設定しない場合はパスワード無しでルームに所属できる。
    - ルーム内は話題をチャネルと呼ばれるスレッド単位で分割できる。
    - チャネルはフォルダのような階層構造で管理できる。
    - ルームポリシーでパスワードの有無や既読をつけるかなどを管理できる。
    - チャットソフトにroomの凍結機能
- チャット
    - 様々な形（テキスト、添付ファイル、画像など）を投稿できる(データ本体をJsonなど拡張可能な形式にしておくなど）
    - 主メッセージに対して返信（スレッド化）できる
    - リアクションできる。リアクションはチャネル毎にカスタマイズできる
    - 個人宛に秘密情報を送信できる
    - テキスト投稿から、課題(Issue)やToDo,ワークフローなどアクティビティを持つスレッドに昇格できる
    - スレッドにタイトルつけられる
    - メッセージ種別Publicity(周知？)追加、しようとしたが意図は忘れた
- ユーザカスタマイズ
    - ユーザ単位でチャネルのブックマークをすることができる。
    - ブックマークされたチャネルはユーザ単位でフォルダを使って整理できる。
- インターフェース
    - 外部からコマンドラインパラメータや標準入出力などでデータベースを操作できるインターフェースを持つ
- 添付ファイル
    - メッセージはテキストの他、任意のファイルを添付できる。
    - 添付ファイルは一定期間保持のあと、自動で削除できる。
- プレゼンテーション
    - 複数ルームを統合して管理できる
- セキュリティ
    - ルームポリシーで暗号化
- ワークフロー
    - メッセージから派生してワークフロー化することができる
    - ルーム単位でワークフロー定義を持ち、テンプレとして使用できる。
    - ワークフロー定義には有効期限があり、見直しをしないと破棄されていく[^yukou]
    
[^yukou]: 有効期限の考え方は他でも使いたい


